---
source: hugr-llvm/src/extension/collections/borrow_array.rs
expression: mod_str
---
; ModuleID = 'test_context'
source_filename = "test_context"

@0 = private unnamed_addr constant [34 x i8] c"Array element is already borrowed\00", align 1
@prelude.panic_template = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@1 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.1 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@2 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.2 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@3 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.3 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@4 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.4 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@5 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.5 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1

define private void @_hl.main.1() {
alloca_block:
  %"12_0" = alloca i64, align 8
  %"10_0" = alloca i64, align 8
  %"15_0" = alloca { ptr, ptr, i64 }, align 8
  %"13_0" = alloca { ptr, ptr, i64 }, align 8
  %"14_0" = alloca i64, align 8
  %"14_1" = alloca i64, align 8
  %"8_0" = alloca i64, align 8
  %"18_0" = alloca { i1, { ptr, ptr, i64 } }, align 8
  %"0" = alloca { i1, { ptr, ptr, i64 } }, align 8
  %"19_0" = alloca { ptr, ptr, i64 }, align 8
  %"015" = alloca { ptr, ptr, i64 }, align 8
  %"017" = alloca { ptr, ptr, i64 }, align 8
  %"24_0" = alloca { i32, ptr }, align 8
  %"21_0" = alloca { ptr, ptr, i64 }, align 8
  %"25_0" = alloca { ptr, ptr, i64 }, align 8
  %"022" = alloca { ptr, ptr, i64 }, align 8
  %"27_0" = alloca { ptr, ptr, i64 }, align 8
  %"29_0" = alloca { i1, i64 }, align 8
  %"29_1" = alloca { ptr, ptr, i64 }, align 8
  %"030" = alloca { i1, i64 }, align 8
  %"1" = alloca { ptr, ptr, i64 }, align 8
  %"31_0" = alloca i64, align 8
  %"034" = alloca i64, align 8
  %"36_0" = alloca { i32, ptr }, align 8
  %"37_0" = alloca i64, align 8
  %"038" = alloca i64, align 8
  %"39_0" = alloca i64, align 8
  %"41_0" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"047" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"42_0" = alloca i64, align 8
  %"42_1" = alloca { ptr, ptr, i64 }, align 8
  %"050" = alloca i64, align 8
  %"151" = alloca { ptr, ptr, i64 }, align 8
  %"054" = alloca i64, align 8
  %"155" = alloca { ptr, ptr, i64 }, align 8
  %"47_0" = alloca { i32, ptr }, align 8
  %"44_0" = alloca i64, align 8
  %"44_1" = alloca { ptr, ptr, i64 }, align 8
  %"48_0" = alloca i64, align 8
  %"48_1" = alloca { ptr, ptr, i64 }, align 8
  %"063" = alloca i64, align 8
  %"164" = alloca { ptr, ptr, i64 }, align 8
  %"50_0" = alloca i64, align 8
  %"50_1" = alloca { ptr, ptr, i64 }, align 8
  %"52_0" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"53_0" = alloca i64, align 8
  %"53_1" = alloca { ptr, ptr, i64 }, align 8
  %"074" = alloca i64, align 8
  %"175" = alloca { ptr, ptr, i64 }, align 8
  %"58_0" = alloca { i32, ptr }, align 8
  %"59_0" = alloca i64, align 8
  %"59_1" = alloca { ptr, ptr, i64 }, align 8
  %"081" = alloca i64, align 8
  %"182" = alloca { ptr, ptr, i64 }, align 8
  %"61_0" = alloca i64, align 8
  %"61_1" = alloca { ptr, ptr, i64 }, align 8
  %"63_0" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"64_0" = alloca i64, align 8
  %"64_1" = alloca { ptr, ptr, i64 }, align 8
  %"092" = alloca i64, align 8
  %"193" = alloca { ptr, ptr, i64 }, align 8
  %"69_0" = alloca { i32, ptr }, align 8
  %"70_0" = alloca i64, align 8
  %"70_1" = alloca { ptr, ptr, i64 }, align 8
  %"099" = alloca i64, align 8
  %"1100" = alloca { ptr, ptr, i64 }, align 8
  %"72_0" = alloca i64, align 8
  %"72_1" = alloca { ptr, ptr, i64 }, align 8
  br label %entry_block

entry_block:                                      ; preds = %alloca_block
  store i64 2, ptr %"12_0", align 4
  store i64 1, ptr %"10_0", align 4
  %"10_01" = load i64, ptr %"10_0", align 4
  %"12_02" = load i64, ptr %"12_0", align 4
  %array_size = mul i64 2, ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64)
  %0 = call ptr @malloc(i64 %array_size)
  %1 = call ptr @malloc(i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64))
  call void @llvm.memset.p0.i64(ptr %1, i8 0, i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64), i1 false)
  %2 = insertvalue { ptr, ptr, i64 } poison, ptr %0, 0
  %3 = insertvalue { ptr, ptr, i64 } %2, ptr %1, 1
  %4 = insertvalue { ptr, ptr, i64 } %3, i64 0, 2
  %5 = getelementptr inbounds i64, ptr %0, i64 0
  store i64 %"10_01", ptr %5, align 4
  %6 = getelementptr inbounds i64, ptr %0, i64 1
  store i64 %"12_02", ptr %6, align 4
  store { ptr, ptr, i64 } %4, ptr %"15_0", align 8
  %"10_03" = load i64, ptr %"10_0", align 4
  %"12_04" = load i64, ptr %"12_0", align 4
  %array_size5 = mul i64 2, ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64)
  %7 = call ptr @malloc(i64 %array_size5)
  %8 = call ptr @malloc(i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64))
  call void @llvm.memset.p0.i64(ptr %8, i8 0, i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64), i1 false)
  %9 = insertvalue { ptr, ptr, i64 } poison, ptr %7, 0
  %10 = insertvalue { ptr, ptr, i64 } %9, ptr %8, 1
  %11 = insertvalue { ptr, ptr, i64 } %10, i64 0, 2
  %12 = getelementptr inbounds i64, ptr %7, i64 0
  store i64 %"10_03", ptr %12, align 4
  %13 = getelementptr inbounds i64, ptr %7, i64 1
  store i64 %"12_04", ptr %13, align 4
  store { ptr, ptr, i64 } %11, ptr %"13_0", align 8
  %"13_06" = load { ptr, ptr, i64 }, ptr %"13_0", align 8
  %array_ptr = extractvalue { ptr, ptr, i64 } %"13_06", 0
  %array_mask_ptr = extractvalue { ptr, ptr, i64 } %"13_06", 1
  %array_offset = extractvalue { ptr, ptr, i64 } %"13_06", 2
  %14 = add i64 %array_offset, 0
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr, i64 %14)
  %15 = getelementptr inbounds i64, ptr %array_ptr, i64 %14
  %16 = load i64, ptr %15, align 4
  %17 = add i64 %array_offset, 1
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr, i64 %17)
  %18 = getelementptr inbounds i64, ptr %array_ptr, i64 %17
  %19 = load i64, ptr %18, align 4
  store i64 %16, ptr %"14_0", align 4
  store i64 %19, ptr %"14_1", align 4
  store i64 0, ptr %"8_0", align 4
  %"15_07" = load { ptr, ptr, i64 }, ptr %"15_0", align 8
  %"8_08" = load i64, ptr %"8_0", align 4
  %"10_09" = load i64, ptr %"10_0", align 4
  %array_ptr10 = extractvalue { ptr, ptr, i64 } %"15_07", 0
  %array_mask_ptr11 = extractvalue { ptr, ptr, i64 } %"15_07", 1
  %array_offset12 = extractvalue { ptr, ptr, i64 } %"15_07", 2
  %20 = icmp ult i64 %"8_08", 2
  %21 = icmp ult i64 %"10_09", 2
  %22 = and i1 %20, %21
  br i1 %22, label %25, label %23

23:                                               ; preds = %entry_block
  %24 = insertvalue { i1, { ptr, ptr, i64 } } { i1 false, { ptr, ptr, i64 } poison }, { ptr, ptr, i64 } %"15_07", 1
  store { i1, { ptr, ptr, i64 } } %24, ptr %"0", align 8
  br label %33

25:                                               ; preds = %entry_block
  %26 = add i64 %"8_08", %array_offset12
  %27 = add i64 %"10_09", %array_offset12
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr11, i64 %26)
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr11, i64 %27)
  %28 = getelementptr inbounds i64, ptr %array_ptr10, i64 %26
  %29 = load i64, ptr %28, align 4
  %30 = getelementptr inbounds i64, ptr %array_ptr10, i64 %27
  %31 = load i64, ptr %30, align 4
  store i64 %31, ptr %28, align 4
  store i64 %29, ptr %30, align 4
  %32 = insertvalue { i1, { ptr, ptr, i64 } } { i1 true, { ptr, ptr, i64 } poison }, { ptr, ptr, i64 } %"15_07", 1
  store { i1, { ptr, ptr, i64 } } %32, ptr %"0", align 8
  br label %33

33:                                               ; preds = %23, %25
  %"013" = load { i1, { ptr, ptr, i64 } }, ptr %"0", align 8
  store { i1, { ptr, ptr, i64 } } %"013", ptr %"18_0", align 8
  %"18_014" = load { i1, { ptr, ptr, i64 } }, ptr %"18_0", align 8
  %34 = extractvalue { i1, { ptr, ptr, i64 } } %"18_014", 0
  switch i1 %34, label %35 [
    i1 true, label %37
  ]

35:                                               ; preds = %33
  %36 = extractvalue { i1, { ptr, ptr, i64 } } %"18_014", 1
  store { ptr, ptr, i64 } %36, ptr %"017", align 8
  br label %cond_19_case_0

37:                                               ; preds = %33
  %38 = extractvalue { i1, { ptr, ptr, i64 } } %"18_014", 1
  store { ptr, ptr, i64 } %38, ptr %"022", align 8
  br label %cond_19_case_1

cond_19_case_0:                                   ; preds = %35
  %"018" = load { ptr, ptr, i64 }, ptr %"017", align 8
  store { i32, ptr } { i32 1, ptr @1 }, ptr %"24_0", align 8
  store { ptr, ptr, i64 } %"018", ptr %"21_0", align 8
  %"24_019" = load { i32, ptr }, ptr %"24_0", align 8
  %"21_020" = load { ptr, ptr, i64 }, ptr %"21_0", align 8
  %39 = extractvalue { i32, ptr } %"24_019", 0
  %40 = extractvalue { i32, ptr } %"24_019", 1
  %41 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.1, i32 %39, ptr %40)
  call void @abort()
  store { ptr, ptr, i64 } zeroinitializer, ptr %"25_0", align 8
  %"25_021" = load { ptr, ptr, i64 }, ptr %"25_0", align 8
  store { ptr, ptr, i64 } %"25_021", ptr %"015", align 8
  br label %cond_exit_19

cond_19_case_1:                                   ; preds = %37
  %"023" = load { ptr, ptr, i64 }, ptr %"022", align 8
  store { ptr, ptr, i64 } %"023", ptr %"27_0", align 8
  %"27_024" = load { ptr, ptr, i64 }, ptr %"27_0", align 8
  store { ptr, ptr, i64 } %"27_024", ptr %"015", align 8
  br label %cond_exit_19

cond_exit_19:                                     ; preds = %cond_19_case_1, %cond_19_case_0
  %"016" = load { ptr, ptr, i64 }, ptr %"015", align 8
  store { ptr, ptr, i64 } %"016", ptr %"19_0", align 8
  %"19_025" = load { ptr, ptr, i64 }, ptr %"19_0", align 8
  %"8_026" = load i64, ptr %"8_0", align 4
  %array_ptr27 = extractvalue { ptr, ptr, i64 } %"19_025", 0
  %array_mask_ptr28 = extractvalue { ptr, ptr, i64 } %"19_025", 1
  %array_offset29 = extractvalue { ptr, ptr, i64 } %"19_025", 2
  %42 = icmp ult i64 %"8_026", 2
  br i1 %42, label %44, label %43

43:                                               ; preds = %cond_exit_19
  store { i1, i64 } { i1 false, i64 poison }, ptr %"030", align 4
  store { ptr, ptr, i64 } %"19_025", ptr %"1", align 8
  br label %49

44:                                               ; preds = %cond_exit_19
  %45 = add i64 %"8_026", %array_offset29
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr28, i64 %45)
  %46 = getelementptr inbounds i64, ptr %array_ptr27, i64 %45
  %47 = load i64, ptr %46, align 4
  %48 = insertvalue { i1, i64 } { i1 true, i64 poison }, i64 %47, 1
  store { i1, i64 } %48, ptr %"030", align 4
  store { ptr, ptr, i64 } %"19_025", ptr %"1", align 8
  br label %49

49:                                               ; preds = %43, %44
  %"031" = load { i1, i64 }, ptr %"030", align 4
  %"132" = load { ptr, ptr, i64 }, ptr %"1", align 8
  store { i1, i64 } %"031", ptr %"29_0", align 4
  store { ptr, ptr, i64 } %"132", ptr %"29_1", align 8
  %"29_033" = load { i1, i64 }, ptr %"29_0", align 4
  %50 = extractvalue { i1, i64 } %"29_033", 0
  switch i1 %50, label %51 [
    i1 true, label %52
  ]

51:                                               ; preds = %49
  br label %cond_31_case_0

52:                                               ; preds = %49
  %53 = extractvalue { i1, i64 } %"29_033", 1
  store i64 %53, ptr %"038", align 4
  br label %cond_31_case_1

cond_31_case_0:                                   ; preds = %51
  store { i32, ptr } { i32 1, ptr @2 }, ptr %"36_0", align 8
  %"36_036" = load { i32, ptr }, ptr %"36_0", align 8
  %54 = extractvalue { i32, ptr } %"36_036", 0
  %55 = extractvalue { i32, ptr } %"36_036", 1
  %56 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.2, i32 %54, ptr %55)
  call void @abort()
  store i64 0, ptr %"37_0", align 4
  %"37_037" = load i64, ptr %"37_0", align 4
  store i64 %"37_037", ptr %"034", align 4
  br label %cond_exit_31

cond_31_case_1:                                   ; preds = %52
  %"039" = load i64, ptr %"038", align 4
  store i64 %"039", ptr %"39_0", align 4
  %"39_040" = load i64, ptr %"39_0", align 4
  store i64 %"39_040", ptr %"034", align 4
  br label %cond_exit_31

cond_exit_31:                                     ; preds = %cond_31_case_1, %cond_31_case_0
  %"035" = load i64, ptr %"034", align 4
  store i64 %"035", ptr %"31_0", align 4
  %"29_141" = load { ptr, ptr, i64 }, ptr %"29_1", align 8
  %"10_042" = load i64, ptr %"10_0", align 4
  %"31_043" = load i64, ptr %"31_0", align 4
  %array_ptr44 = extractvalue { ptr, ptr, i64 } %"29_141", 0
  %array_mask_ptr45 = extractvalue { ptr, ptr, i64 } %"29_141", 1
  %array_offset46 = extractvalue { ptr, ptr, i64 } %"29_141", 2
  %57 = icmp ult i64 %"10_042", 2
  br i1 %57, label %61, label %58

58:                                               ; preds = %cond_exit_31
  %59 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 false, { ptr, ptr, i64 } poison, i64 poison }, i64 %"31_043", 2
  %60 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %59, { ptr, ptr, i64 } %"29_141", 1
  store { i1, { ptr, ptr, i64 }, i64 } %60, ptr %"047", align 8
  br label %67

61:                                               ; preds = %cond_exit_31
  %62 = add i64 %"10_042", %array_offset46
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr45, i64 %62)
  %63 = getelementptr inbounds i64, ptr %array_ptr44, i64 %62
  %64 = load i64, ptr %63, align 4
  store i64 %"31_043", ptr %63, align 4
  %65 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 true, { ptr, ptr, i64 } poison, i64 poison }, i64 %64, 2
  %66 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %65, { ptr, ptr, i64 } %"29_141", 1
  store { i1, { ptr, ptr, i64 }, i64 } %66, ptr %"047", align 8
  br label %67

67:                                               ; preds = %58, %61
  %"048" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"047", align 8
  store { i1, { ptr, ptr, i64 }, i64 } %"048", ptr %"41_0", align 8
  %"41_049" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"41_0", align 8
  %68 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_049", 0
  switch i1 %68, label %69 [
    i1 true, label %72
  ]

69:                                               ; preds = %67
  %70 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_049", 2
  %71 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_049", 1
  store i64 %70, ptr %"054", align 4
  store { ptr, ptr, i64 } %71, ptr %"155", align 8
  br label %cond_42_case_0

72:                                               ; preds = %67
  %73 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_049", 2
  %74 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_049", 1
  store i64 %73, ptr %"063", align 4
  store { ptr, ptr, i64 } %74, ptr %"164", align 8
  br label %cond_42_case_1

cond_42_case_0:                                   ; preds = %69
  %"056" = load i64, ptr %"054", align 4
  %"157" = load { ptr, ptr, i64 }, ptr %"155", align 8
  store { i32, ptr } { i32 1, ptr @3 }, ptr %"47_0", align 8
  store i64 %"056", ptr %"44_0", align 4
  store { ptr, ptr, i64 } %"157", ptr %"44_1", align 8
  %"47_058" = load { i32, ptr }, ptr %"47_0", align 8
  %"44_059" = load i64, ptr %"44_0", align 4
  %"44_160" = load { ptr, ptr, i64 }, ptr %"44_1", align 8
  %75 = extractvalue { i32, ptr } %"47_058", 0
  %76 = extractvalue { i32, ptr } %"47_058", 1
  %77 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.3, i32 %75, ptr %76)
  call void @abort()
  store i64 0, ptr %"48_0", align 4
  store { ptr, ptr, i64 } zeroinitializer, ptr %"48_1", align 8
  %"48_061" = load i64, ptr %"48_0", align 4
  %"48_162" = load { ptr, ptr, i64 }, ptr %"48_1", align 8
  store i64 %"48_061", ptr %"050", align 4
  store { ptr, ptr, i64 } %"48_162", ptr %"151", align 8
  br label %cond_exit_42

cond_42_case_1:                                   ; preds = %72
  %"065" = load i64, ptr %"063", align 4
  %"166" = load { ptr, ptr, i64 }, ptr %"164", align 8
  store i64 %"065", ptr %"50_0", align 4
  store { ptr, ptr, i64 } %"166", ptr %"50_1", align 8
  %"50_067" = load i64, ptr %"50_0", align 4
  %"50_168" = load { ptr, ptr, i64 }, ptr %"50_1", align 8
  store i64 %"50_067", ptr %"050", align 4
  store { ptr, ptr, i64 } %"50_168", ptr %"151", align 8
  br label %cond_exit_42

cond_exit_42:                                     ; preds = %cond_42_case_1, %cond_42_case_0
  %"052" = load i64, ptr %"050", align 4
  %"153" = load { ptr, ptr, i64 }, ptr %"151", align 8
  store i64 %"052", ptr %"42_0", align 4
  store { ptr, ptr, i64 } %"153", ptr %"42_1", align 8
  %"42_169" = load { ptr, ptr, i64 }, ptr %"42_1", align 8
  %array_ptr70 = extractvalue { ptr, ptr, i64 } %"42_169", 0
  %array_mask_ptr71 = extractvalue { ptr, ptr, i64 } %"42_169", 1
  %array_offset72 = extractvalue { ptr, ptr, i64 } %"42_169", 2
  %new_offset = add i64 %array_offset72, 1
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr71, i64 %array_offset72)
  %78 = getelementptr inbounds i64, ptr %array_ptr70, i64 %array_offset72
  %79 = load i64, ptr %78, align 4
  %80 = insertvalue { ptr, ptr, i64 } poison, ptr %array_ptr70, 0
  %81 = insertvalue { ptr, ptr, i64 } %80, ptr %array_mask_ptr71, 1
  %82 = insertvalue { ptr, ptr, i64 } %81, i64 %new_offset, 2
  %83 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 true, { ptr, ptr, i64 } poison, i64 poison }, i64 %79, 2
  %84 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %83, { ptr, ptr, i64 } %82, 1
  store { i1, { ptr, ptr, i64 }, i64 } %84, ptr %"52_0", align 8
  %"52_073" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"52_0", align 8
  %85 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"52_073", 0
  switch i1 %85, label %86 [
    i1 true, label %87
  ]

86:                                               ; preds = %cond_exit_42
  br label %cond_53_case_0

87:                                               ; preds = %cond_exit_42
  %88 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"52_073", 2
  %89 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"52_073", 1
  store i64 %88, ptr %"081", align 4
  store { ptr, ptr, i64 } %89, ptr %"182", align 8
  br label %cond_53_case_1

cond_53_case_0:                                   ; preds = %86
  store { i32, ptr } { i32 1, ptr @4 }, ptr %"58_0", align 8
  %"58_078" = load { i32, ptr }, ptr %"58_0", align 8
  %90 = extractvalue { i32, ptr } %"58_078", 0
  %91 = extractvalue { i32, ptr } %"58_078", 1
  %92 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.4, i32 %90, ptr %91)
  call void @abort()
  store i64 0, ptr %"59_0", align 4
  store { ptr, ptr, i64 } zeroinitializer, ptr %"59_1", align 8
  %"59_079" = load i64, ptr %"59_0", align 4
  %"59_180" = load { ptr, ptr, i64 }, ptr %"59_1", align 8
  store i64 %"59_079", ptr %"074", align 4
  store { ptr, ptr, i64 } %"59_180", ptr %"175", align 8
  br label %cond_exit_53

cond_53_case_1:                                   ; preds = %87
  %"083" = load i64, ptr %"081", align 4
  %"184" = load { ptr, ptr, i64 }, ptr %"182", align 8
  store i64 %"083", ptr %"61_0", align 4
  store { ptr, ptr, i64 } %"184", ptr %"61_1", align 8
  %"61_085" = load i64, ptr %"61_0", align 4
  %"61_186" = load { ptr, ptr, i64 }, ptr %"61_1", align 8
  store i64 %"61_085", ptr %"074", align 4
  store { ptr, ptr, i64 } %"61_186", ptr %"175", align 8
  br label %cond_exit_53

cond_exit_53:                                     ; preds = %cond_53_case_1, %cond_53_case_0
  %"076" = load i64, ptr %"074", align 4
  %"177" = load { ptr, ptr, i64 }, ptr %"175", align 8
  store i64 %"076", ptr %"53_0", align 4
  store { ptr, ptr, i64 } %"177", ptr %"53_1", align 8
  %"53_187" = load { ptr, ptr, i64 }, ptr %"53_1", align 8
  %array_ptr88 = extractvalue { ptr, ptr, i64 } %"53_187", 0
  %array_mask_ptr89 = extractvalue { ptr, ptr, i64 } %"53_187", 1
  %array_offset90 = extractvalue { ptr, ptr, i64 } %"53_187", 2
  %93 = add i64 %array_offset90, 0
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr89, i64 %93)
  %94 = getelementptr inbounds i64, ptr %array_ptr88, i64 %93
  %95 = load i64, ptr %94, align 4
  %96 = insertvalue { ptr, ptr, i64 } poison, ptr %array_ptr88, 0
  %97 = insertvalue { ptr, ptr, i64 } %96, ptr %array_mask_ptr89, 1
  %98 = insertvalue { ptr, ptr, i64 } %97, i64 %array_offset90, 2
  %99 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 true, { ptr, ptr, i64 } poison, i64 poison }, i64 %95, 2
  %100 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %99, { ptr, ptr, i64 } %98, 1
  store { i1, { ptr, ptr, i64 }, i64 } %100, ptr %"63_0", align 8
  %"63_091" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"63_0", align 8
  %101 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"63_091", 0
  switch i1 %101, label %102 [
    i1 true, label %103
  ]

102:                                              ; preds = %cond_exit_53
  br label %cond_64_case_0

103:                                              ; preds = %cond_exit_53
  %104 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"63_091", 2
  %105 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"63_091", 1
  store i64 %104, ptr %"099", align 4
  store { ptr, ptr, i64 } %105, ptr %"1100", align 8
  br label %cond_64_case_1

cond_64_case_0:                                   ; preds = %102
  store { i32, ptr } { i32 1, ptr @5 }, ptr %"69_0", align 8
  %"69_096" = load { i32, ptr }, ptr %"69_0", align 8
  %106 = extractvalue { i32, ptr } %"69_096", 0
  %107 = extractvalue { i32, ptr } %"69_096", 1
  %108 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.5, i32 %106, ptr %107)
  call void @abort()
  store i64 0, ptr %"70_0", align 4
  store { ptr, ptr, i64 } zeroinitializer, ptr %"70_1", align 8
  %"70_097" = load i64, ptr %"70_0", align 4
  %"70_198" = load { ptr, ptr, i64 }, ptr %"70_1", align 8
  store i64 %"70_097", ptr %"092", align 4
  store { ptr, ptr, i64 } %"70_198", ptr %"193", align 8
  br label %cond_exit_64

cond_64_case_1:                                   ; preds = %103
  %"0101" = load i64, ptr %"099", align 4
  %"1102" = load { ptr, ptr, i64 }, ptr %"1100", align 8
  store i64 %"0101", ptr %"72_0", align 4
  store { ptr, ptr, i64 } %"1102", ptr %"72_1", align 8
  %"72_0103" = load i64, ptr %"72_0", align 4
  %"72_1104" = load { ptr, ptr, i64 }, ptr %"72_1", align 8
  store i64 %"72_0103", ptr %"092", align 4
  store { ptr, ptr, i64 } %"72_1104", ptr %"193", align 8
  br label %cond_exit_64

cond_exit_64:                                     ; preds = %cond_64_case_1, %cond_64_case_0
  %"094" = load i64, ptr %"092", align 4
  %"195" = load { ptr, ptr, i64 }, ptr %"193", align 8
  store i64 %"094", ptr %"64_0", align 4
  store { ptr, ptr, i64 } %"195", ptr %"64_1", align 8
  %"64_1105" = load { ptr, ptr, i64 }, ptr %"64_1", align 8
  %array_ptr106 = extractvalue { ptr, ptr, i64 } %"64_1105", 0
  %array_mask_ptr107 = extractvalue { ptr, ptr, i64 } %"64_1105", 1
  %array_offset108 = extractvalue { ptr, ptr, i64 } %"64_1105", 2
  call void @free(ptr %array_ptr106)
  call void @free(ptr %array_mask_ptr107)
  ret void
}

declare ptr @malloc(i64)

; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: write)
declare void @llvm.memset.p0.i64(ptr writeonly captures(none), i8, i64, i1 immarg) #0

define internal void @__barray_mask_check_not_borrowed(ptr %0, i64 %1) {
  %3 = udiv i64 %1, 64
  %4 = getelementptr inbounds i64, ptr %0, i64 %3
  %5 = load i64, ptr %4, align 4
  %6 = urem i64 %1, 64
  %7 = lshr i64 %5, %6
  %8 = trunc i64 %7 to i1
  br i1 %8, label %panic, label %ok

panic:                                            ; preds = %2
  %9 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template, i32 2, ptr @0)
  call void @abort()
  unreachable

ok:                                               ; preds = %2
  ret void
}

declare i32 @printf(ptr, ...)

declare void @abort()

declare void @free(ptr)

attributes #0 = { nocallback nofree nounwind willreturn memory(argmem: write) }
